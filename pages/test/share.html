<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
    <title>KakaoLink Demo(Dynamic) - Kakao JavaScript SDK</title>
    <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.27/angular.js"></script>
  </head>
  <body ng-app="myApp">
    <h3>카카오톡 링크는 카카오톡 앱이 설치되어 있는 모바일 기기에서만 전송 가능합니다.</h3>
    <a id="kakao-link-btn" send-kakao-link>
      <img src="http://dn.api1.kage.kakao.co.kr/14/dn/btqa9B90G1b/GESkkYjKCwJdYOkLvIBKZ0/o.jpg" />
    </a>

    <script>
    // 사용할 앱의 JavaScript 키를 설정해 주세요.
    Kakao.init('6fa03378dfc44b611cc811af369f0bf3');

    var app = angular.module('myApp', []); 
    app.directive('sendKakaoLink', function() {
      return {
        restrict: 'EA',
        replace: true,
        template: '<a href="javascript:;" class="link_{{type}}"><span class="img_comm ico_talk {{classname}} #{{type}}"></span>@@@@@{{name}}</a>',
        link: function(scope, element, attrs) {
          element.bind('click', function() {
            alert("aaaaaaaaaaaaaaaaaaa");
            Kakao.Link.sendTalkLink({
              label: '안녕하세요, 꽃다운 ' + Math.floor(Math.random()*(70)+ 15) + '살 개발자입니다.'
            });
          });
        }
      }
    });

    </script>
  </body>
</html>
